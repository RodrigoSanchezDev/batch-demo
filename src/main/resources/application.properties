# ==============================================
# CONFIGURACIÓN DEL SISTEMA BANCARIO BATCH
# ==============================================
spring.application.name=banco-batch-demo

# ==============================================
# CONFIGURACIÓN DE LA BASE DE DATOS MYSQL
# ==============================================
spring.datasource.url=jdbc:mysql://localhost:3306/banco_batch?createDatabaseIfNotExist=true&useSSL=false&allowPublicKeyRetrieval=true&serverTimezone=America/Santiago
spring.datasource.username=root
spring.datasource.password=

# Deshabilitar inicialización automática del schema
spring.sql.init.mode=never
spring.datasource.driver-class-name=com.mysql.cj.jdbc.Driver

# ==============================================
# CONFIGURACIÓN DE HIBERNATE/JPA PARA MYSQL
# ==============================================
spring.jpa.database-platform=org.hibernate.dialect.MySQLDialect
spring.jpa.hibernate.ddl-auto=none
spring.jpa.show-sql=false
spring.jpa.properties.hibernate.format_sql=true

# ==============================================
# CONFIGURACIÓN DE SPRING BATCH CON ESCALAMIENTO PARALELO
# ==============================================
spring.batch.jdbc.initialize-schema=never
spring.batch.job.enabled=false

# === CONFIGURACIÓN DE POLÍTICAS DE ESCALAMIENTO ===
# Chunk size optimizado para procesamiento paralelo
batch.chunk.size=5

# Configuración de TaskExecutor para 3 hilos paralelos
batch.scaling.core.pool.size=3
batch.scaling.max.pool.size=5
batch.scaling.queue.capacity=50
batch.scaling.keep.alive.seconds=60

# === CONFIGURACIÓN DE TOLERANCIA A FALLOS INTEGRADA ===
# Políticas de reintento por tipo de excepción
fault.tolerance.retry.database.attempts=5
fault.tolerance.retry.runtime.attempts=3
fault.tolerance.retry.validation.attempts=2

# Políticas de skip por proceso
fault.tolerance.skip.transacciones.limit=10
fault.tolerance.skip.cuentas.limit=5
fault.tolerance.skip.intereses.limit=3

# Backoff exponencial para reintentos
fault.tolerance.backoff.initial.interval=1000
fault.tolerance.backoff.multiplier=2.0
fault.tolerance.backoff.max.interval=30000

# === CONFIGURACIÓN DE MONITOREO DE ESCALAMIENTO ===
# Logging detallado para análisis de rendimiento
logging.level.com.duoc.batchdemo.config.ScalingPolicyConfig=INFO
logging.level.com.duoc.batchdemo.listener.ScalingPerformanceListener=INFO
logging.level.com.duoc.batchdemo.config.FaultToleranceConfig=DEBUG

# Deshabilitar temporalmente inicialización automática del schema
# spring.sql.init.schema-locations=classpath:schema-mysql.sql
# spring.sql.init.mode=always
